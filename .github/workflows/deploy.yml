script: |
  echo "ğŸ“¦ Acessando diretÃ³rio do bot"
  cd tradewatch-bot

  echo "ğŸ” Checando variÃ¡veis essenciais..."
  test -f .env || { echo 'âŒ .env nÃ£o encontrado'; exit 1; }
  grep -q TELEGRAM_TOKEN .env || { echo 'âŒ TELEGRAM_TOKEN ausente no .env'; exit 1; }

  echo "ğŸ”„ Atualizando repositÃ³rio"
  git pull origin main

  echo "ğŸ§¹ Removendo containers antigos"
  docker-compose down

  echo "ğŸ§¼ Limpando imagens nÃ£o utilizadas"
  docker image prune -f

  echo "ğŸš€ Subindo nova versÃ£o com build forÃ§ado"
  docker-compose up -d --build --remove-orphans

  echo "ğŸ©º Executando healthcheck"
  curl -f http://localhost:3000/health || exit 1